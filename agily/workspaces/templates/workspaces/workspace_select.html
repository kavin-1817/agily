{% extends 'base.html' %}

{% block page_title %}Select Workspace{% endblock %}

{% block content %}
{% with hide_main_menu=True %}
<div class="container">
  <div class="section">
    <div class="card">
      <div class="card-content">
        <h2 class="title has-text-centered">Select a Workspace</h2>
        
        {% if user.is_superuser %}
          <div class="notification is-info">
            <p><strong>Superuser Access:</strong> You can access all workspaces in the system. To create new workspaces, use the admin panel.</p>
          </div>
        {% elif is_project_admin %}
          <div class="notification is-info">
            <p><strong>Project Admin Access:</strong> You are logged in as a <strong>Project Admin</strong>. You can access workspaces where you are a member and have project admin rights.</p>
          </div>
        {% elif is_developer %}
          <div class="notification is-info">
            <p><strong>Developer Access:</strong> You are logged in as a <strong>Developer</strong>. You can access workspaces where you are a member and have developer rights.</p>
          </div>
        {% elif is_tester %}
          <div class="notification is-info">
            <p><strong>Tester Access:</strong> You are logged in as a <strong>Tester</strong>. You can access workspaces where you are a member and have tester rights.</p>
          </div>
        {% else %}
          <div class="notification is-info">
            <p><strong>Workspace Access:</strong> You can access workspaces where you are a member.</p>
          </div>
        {% endif %}
        
        {% if error %}
          <div class="notification is-danger">
            <button class="delete" onclick="this.parentElement.remove()"></button>
            {{ error }}
          </div>
        {% endif %}
        
        <form method="post">
          {% csrf_token %}
          <div class="field">
            <label class="label">Choose a Workspace</label>
            <div class="control">
              <div class="select is-medium is-fullwidth">
                <select name="workspace" required id="workspace-select">
                  <option value="">-- Choose a workspace --</option>
                  {% for workspace in workspaces %}
                    <option value="{{ workspace.slug }}">{{ workspace.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Select the workspace you want to work in.</p>
          </div>
          
          <div class="field is-grouped is-grouped-centered">
            <div class="control">
              <button class="button is-primary is-medium" type="submit">Continue to Workspace</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endwith %}
{% endblock %} 